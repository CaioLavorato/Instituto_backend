{% extends 'baseLogado.html' %}

{% block content %}
<style>.course-image, .aula-image {
    text-align: center; /* Centraliza as imagens */
    margin: 20px 0; /* Margem em cima e embaixo das imagens */
}

.course-image img, .aula-image img {
    max-width: 80%; /* Garante que as imagens não ultrapassem o tamanho do contêiner */
    height: auto; /* Mantém a proporção da imagem */
    border-radius: 10px; /* Bordas arredondadas para um visual mais suave */
}</style>
<div class="inner-page-wrapper">
    <!-- BREADCRUMB -->
    <div id="breadcrumb" class="division">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="{% url 'homepage' %}">Home</a></li>
                            <li class="breadcrumb-item"><a href="{% url 'lista_forum' %}">Fórum</a></li>
                            <li class="breadcrumb-item active" aria-current="page">{{ topico.titulo }}</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <!-- PAGE HERO -->
    <section class="bg-05 page-hero-section division">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="hero-txt white-color">
                        <h3 class="h3-xs">{{ topico.titulo }}</h3>
                        <div class="share-list">
                            <ul class="share-social-icons text-center clearfix">
                                <li>
                                    <p>Criado por: <span>{{ topico.usuario.username }}</span> em {{ topico.data_criacao|date:"d/m/Y H:i" }}</p>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- TOPIC DETAILS -->
    <section id="course-details" class="wide-60 course-section division">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="course-txt">
                        <!-- Exibir imagem do curso -->
                        <div class="course-image">
                            <img src="{{ topico.thumb.url }}" alt="Imagem do Forum" class="img-fluid" />
                        </div>
                        <h3>Curso - {{ topico.curso.titulo }} / Vídeo - {{ topico.aula.titulo }}</h3>
                        <p>{{ topico.conteudo }}</p>
    
                        <!-- Exibir imagem da aula
                        <div class="aula-image">
                            <img src="{{ topico.aula.conteudo.url }}" alt="Imagem da Aula" class="img-fluid" />
                        </div> -->
                    </div>
                </div>
            </div>

            <!-- RESPONSES -->
            <div class="row">
                <div class="col-md-12">
                    <h4 class="h4-sm mt-60">Respostas</h4>
                    {% for resposta in respostas %}
                    <div class="review-2">
                        <div class="review-2-txt">
                            <h5 class="h5-sm">{{ resposta.usuario.username }}</h5>
                            <span>{{ resposta.data_criacao|date:"d/m/Y H:i" }}</span>
                            <p>{{ resposta.conteudo }}</p>
                        </div>
                    </div>
                    {% empty %}
                    <p>Nenhuma resposta ainda.</p>
                    {% endfor %}
                </div>
            </div>

            <!-- RESPONSE FORM -->
            <div class="row">
                <div class="col-md-12">
                        <h4 class="h4-sm mt-60">Adicionar Resposta</h4>
                        <form method="post" action="{% url 'detalhe_forum' topico.pk %}">
                            {% csrf_token %}
                            <div class="form-group">
                                <label for="id_conteudo">Conteúdo</label>
                                <textarea id="id_conteudo" name="conteudo" class="form-control" rows="5" placeholder="Digite sua resposta aqui...">{{ formulario.conteudo.value|default_if_none:"" }}</textarea>
                                {% if formulario.conteudo.errors %}
                                    <div class="alert alert-danger mt-2">
                                        {% for error in formulario.conteudo.errors %}
                                            <p>{{ error }}</p>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                            <button type="submit" class="btn btn-md btn-blue tra-black-hover">Enviar Resposta</button>
                        </form>
                </div>
            </div>
        </div>
    </section>
</div>
{% endblock %}